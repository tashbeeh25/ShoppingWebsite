<%@ page import="java.util.Collection,                 java.util.Iterator"%><%@ page import="shop.Product" %><jsp:useBean id='basket'         scope='session'         class='shop.Basket'          /><jsp:useBean id='db'             scope='session'             class='shop.ShopDB' /><%    String empty = request.getParameter("emptyBasket");    if (empty!=null) {        basket.clearBasket();    }    String item = request.getParameter("addItem");    basket.addItem(item);    if (item != null){        response.sendRedirect("basket.jsp");    }    String remove = request.getParameter("remove");    if(remove!=null){        basket.removeProduct(remove);        response.sendRedirect("redirect.jsp");    }%><html><head>    <link rel="stylesheet" href="css.css">    <script>        function validation() {            var x = document.forms["myForm"]["name"].value;            if (x == ""){                alert("Name must be filled out");                return false;            }        }    </script>    <script>        function deleteRow(r){            var i = r.parentNode.parentNode.rowIndex;            document.getElementsById('myTable').deleteRow[i];        }    </script>    <script>    function deleteRow() {        var current = window.event.srcElement;        while ( (current = current.parentElement)  && current.tagName !="'tr'");        current.parentElement.removeChild(current);    }    </script></head><body><jsp:include page="header.jsp"/><jsp:include page="footer.jsp"/><% Collection items = basket.getItems();    out.println("<table>");    out.println("<tr>");        out.println("<th> Item </th>");        out.println("<th> Thumbnail </th>");        out.println("<th> Price </th>");        out.println("<th> Quantity </th>");        out.println("<th> Add Item </th>");        out.println("<th> Remove Item </th>");    out.println("</tr>");    for (Product product : basket.getItems()) {        out.println("<tr>");            out.println("<td>" + product.title + "</td>");%><td>  <a href = '<%="viewProduct.jsp?pid="+product.PID%>'> <img height="50" width="50" src="<%= product.thumbnail %>"/> </a>  </td><%            out.println("<td>" + "&pound" + (product.price /100) + "." + String.format("%02d", product.price % 100) + "</td>");            out.println("<td>" + "<select>" + "<option value= 1>" + 1 + "</option>" +  "<option value= 2>" + 2 + "</option>" + "<option value= 3>" + 3 + "</option>" +                            "<option value= 4>" + 4 + "</option>" + "<option value= 5>" + 5 + "</option>" + "<option value= 6>" + 6 + "</option>" + "<option value= 7>" + 7 + "</option>" +                            "<option value= 8>" + 8 + "</option>" + "<option value= 9>" + 9 + "</option>" + "<option value= 10>" + 10 + "</option>" +                    "</select>" + "</td>");        %><td><a href = '<%="basket.jsp?addItem="+product.PID%>'><input type="button" value="add" onclick=""></a></td><td><input type="button" value="Remove" onclick=""></td><%        out.println("</tr>");    }    out.println("<td>" + "Order Total = " + "&pound" +  basket.getTotalString() + "</td>");    %><%    out.println("<table>");%><%    if ( basket.getTotal() > 0) {        %>        <form name="myForm" action="order.jsp" onsubmit="return validation()" method="post">            Enter your Name: <input type="text" name="name" size="20">        <input type="submit" value="Place Order" />        </form>        <form action="basket.jsp" method="get">        <input type="hidden" name="emptyBasket" value="yes">        <input type="submit" value="Empty Basket" />        </form>        <%    }%></body></html>